"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.is = exports.stringify = exports.valueOf = exports.validate = exports.create = void 0;
const lib_1 = require("./lib");
function create(anyValue, strict) {
    let value;
    if (typeof anyValue === 'number') {
        value = anyValue;
    }
    else if (typeof anyValue === 'string') {
        const m = anyValue.match(/(\d+):(\d+):(\d+)/);
        if (!m)
            throw new Error(`MosDuration: Invalid input format: "${anyValue}"!`);
        const hh = parseInt(m[1], 10);
        const mm = parseInt(m[2], 10);
        const ss = parseInt(m[3], 10);
        if (isNaN(hh) || isNaN(mm) || isNaN(ss))
            throw new Error(`MosDuration: Bad input format "${anyValue}"!`);
        value = hh * 3600 + mm * 60 + ss;
    }
    else {
        throw new Error(`MosDuration: Invalid input: "${anyValue}"`);
    }
    const mosDuration = { _mosDuration: value };
    validate(mosDuration, strict);
    return mosDuration;
}
exports.create = create;
function validate(_mosDuration, _strict) {
    // nothing
}
exports.validate = validate;
function valueOf(mosDuration) {
    if (typeof mosDuration === 'number')
        return mosDuration; // helpful hack
    return mosDuration._mosDuration;
}
exports.valueOf = valueOf;
function stringify(mosDuration) {
    if (typeof mosDuration === 'string')
        return mosDuration; // helpful hack
    let s = mosDuration._mosDuration;
    const hh = Math.floor(s / 3600);
    s -= hh * 3600;
    const mm = Math.floor(s / 60);
    s -= mm * 60;
    const ss = Math.floor(s);
    return hh + ':' + (0, lib_1.pad)(mm, 2) + ':' + (0, lib_1.pad)(ss, 2);
}
exports.stringify = stringify;
function is(mosDuration) {
    if (typeof mosDuration !== 'object')
        return false;
    if (mosDuration === null)
        return false;
    return mosDuration._mosDuration !== undefined;
}
exports.is = is;
//# sourceMappingURL=mosDuration.js.map